\hypertarget{setores_2update_8php}{}\section{/var/www/chamador.itep.\+govrn/public/api/menu/configuracoes/setores/update.php File Reference}
\label{setores_2update_8php}\index{/var/www/chamador.\+itep.\+govrn/public/api/menu/configuracoes/setores/update.\+php@{/var/www/chamador.\+itep.\+govrn/public/api/menu/configuracoes/setores/update.\+php}}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{setores_2update_8php_a252370d95039a38fa11afab784725d58}{\$dados} = \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em Cabeçalho para conteudo json. \end{DoxyCompactList}\item 
\hyperlink{setores_2update_8php_a26b9f9373f7bb79dfcf8a86dff086b45}{\$body} = file\+\_\+get\+\_\+contents(\textquotesingle{}php\+://input\textquotesingle{})
\begin{DoxyCompactList}\small\item\em Contem todos os dados a serem enviados. \end{DoxyCompactList}\item 
\hyperlink{setores_2update_8php_acedd13b51401130848ce18f4d5c52605}{\$json} = json\+\_\+decode(\$body, true)
\begin{DoxyCompactList}\small\item\em Obtém todas as informações requisitadas P\+O\+ST. \end{DoxyCompactList}\item 
\hyperlink{setores_2update_8php_afc31993e855f9631572adfedcfe6f34b}{\$login} = \$json\mbox{[}\textquotesingle{}login\textquotesingle{}\mbox{]}
\begin{DoxyCompactList}\small\item\em Decodifica as informações requisitadas. \end{DoxyCompactList}\item 
\hyperlink{setores_2update_8php_a3678c8769c9698fd30581c1016c5f475}{\$senha} = \$json\mbox{[}\textquotesingle{}senha\textquotesingle{}\mbox{]}
\begin{DoxyCompactList}\small\item\em Login do usuário que requisitou a informação. \end{DoxyCompactList}\item 
\hyperlink{setores_2update_8php_ae97941710d863131c700f069b109991e}{\$id} = \$json\mbox{[}\textquotesingle{}id\textquotesingle{}\mbox{]}
\begin{DoxyCompactList}\small\item\em Senha criptografada do usuário que requisitou a informação. \end{DoxyCompactList}\item 
\hyperlink{setores_2update_8php_ac8c9d9dd5d90fa5854f0cb8397084ebd}{\$nome} = \hyperlink{_header_8php_a8909d20d656fecf83ebaa2bed0cab2c1}{input\+\_\+check}(\$json\mbox{[}\textquotesingle{}nome\textquotesingle{}\mbox{]})
\begin{DoxyCompactList}\small\item\em id do setor que será modificado \end{DoxyCompactList}\item 
\hyperlink{setores_2update_8php_aab83e7ad10d8c95fdbf231d086b83a1f}{\$ficha} = \$json\mbox{[}\textquotesingle{}ficha\textquotesingle{}\mbox{]}
\begin{DoxyCompactList}\small\item\em novo nome do setor \end{DoxyCompactList}\item 
\hyperlink{setores_2update_8php_ad3b3c64b25fbbb6aec24407e4333aa71}{\$admin} = \$json\mbox{[}\textquotesingle{}admin\textquotesingle{}\mbox{]}
\begin{DoxyCompactList}\small\item\em nova opção do setor se do tipo ficha \end{DoxyCompactList}\item 
\hyperlink{setores_2update_8php_abe4cc9788f52e49485473dc699537388}{try}
\begin{DoxyCompactList}\small\item\em nova opção do setor se do tipo administrador \end{DoxyCompactList}\item 
if(\$credenciais-\/$>$get\+\_\+user() -\/$>$get\+\_\+sector() -\/$>$get\+\_\+admin()==false) \hyperlink{setores_2update_8php_a96db4ecde3fc28a58d5ddae82826b84c}{else}
\begin{DoxyCompactList}\small\item\em Obter a credencial do usário. \end{DoxyCompactList}\item 
\hyperlink{setores_2update_8php_a9a2cf15a653aee8be437f7ae474cd494}{\$log} = new \hyperlink{class_class_logs}{Class\+Logs}(null, \$credenciais-\/$>$get\+\_\+user(), \char`\"{}A\+T\+U\+A\+L\+I\+Z\+OU S\+E\+T\+OR\char`\"{}, \$setor)
\item 
\hyperlink{imprimir_2ficha_2index_8php_a8104793004944f01dd070fc8b1ade3c4}{catch}(Exception \$e) \hyperlink{setores_2update_8php_a1eb47d68a4a4f73debf91b15e179d813}{finally}
\begin{DoxyCompactList}\small\item\em Criar um log desta operação no sistema. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Variable Documentation}
\mbox{\Hypertarget{setores_2update_8php_ad3b3c64b25fbbb6aec24407e4333aa71}\label{setores_2update_8php_ad3b3c64b25fbbb6aec24407e4333aa71}} 
\index{setores/update.\+php@{setores/update.\+php}!\$admin@{\$admin}}
\index{\$admin@{\$admin}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{\$admin}{$admin}}
{\footnotesize\ttfamily \$admin = \$json\mbox{[}\textquotesingle{}admin\textquotesingle{}\mbox{]}}



nova opção do setor se do tipo ficha 



Definition at line 30 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_a26b9f9373f7bb79dfcf8a86dff086b45}\label{setores_2update_8php_a26b9f9373f7bb79dfcf8a86dff086b45}} 
\index{setores/update.\+php@{setores/update.\+php}!\$body@{\$body}}
\index{\$body@{\$body}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{\$body}{$body}}
{\footnotesize\ttfamily \$body = file\+\_\+get\+\_\+contents(\textquotesingle{}php\+://input\textquotesingle{})}



Contem todos os dados a serem enviados. 



Definition at line 21 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_a252370d95039a38fa11afab784725d58}\label{setores_2update_8php_a252370d95039a38fa11afab784725d58}} 
\index{setores/update.\+php@{setores/update.\+php}!\$dados@{\$dados}}
\index{\$dados@{\$dados}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{\$dados}{$dados}}
{\footnotesize\ttfamily \$dados = \mbox{[}$\,$\mbox{]}}



Cabeçalho para conteudo json. 

Cabeçalho com as classes e funções gerias 

Definition at line 19 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_aab83e7ad10d8c95fdbf231d086b83a1f}\label{setores_2update_8php_aab83e7ad10d8c95fdbf231d086b83a1f}} 
\index{setores/update.\+php@{setores/update.\+php}!\$ficha@{\$ficha}}
\index{\$ficha@{\$ficha}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{\$ficha}{$ficha}}
{\footnotesize\ttfamily \$ficha = \$json\mbox{[}\textquotesingle{}ficha\textquotesingle{}\mbox{]}}



novo nome do setor 



Definition at line 29 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_ae97941710d863131c700f069b109991e}\label{setores_2update_8php_ae97941710d863131c700f069b109991e}} 
\index{setores/update.\+php@{setores/update.\+php}!\$id@{\$id}}
\index{\$id@{\$id}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{\$id}{$id}}
{\footnotesize\ttfamily \$id = \$json\mbox{[}\textquotesingle{}id\textquotesingle{}\mbox{]}}



Senha criptografada do usuário que requisitou a informação. 



Definition at line 27 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_acedd13b51401130848ce18f4d5c52605}\label{setores_2update_8php_acedd13b51401130848ce18f4d5c52605}} 
\index{setores/update.\+php@{setores/update.\+php}!\$json@{\$json}}
\index{\$json@{\$json}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{\$json}{$json}}
{\footnotesize\ttfamily \$json = json\+\_\+decode(\$body, true)}



Obtém todas as informações requisitadas P\+O\+ST. 



Definition at line 22 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_a9a2cf15a653aee8be437f7ae474cd494}\label{setores_2update_8php_a9a2cf15a653aee8be437f7ae474cd494}} 
\index{setores/update.\+php@{setores/update.\+php}!\$log@{\$log}}
\index{\$log@{\$log}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{\$log}{$log}}
{\footnotesize\ttfamily \$log = new \hyperlink{class_class_logs}{Class\+Logs}(null, \$credenciais-\/$>$get\+\_\+user(), \char`\"{}A\+T\+U\+A\+L\+I\+Z\+OU S\+E\+T\+OR\char`\"{}, \$setor)}



Definition at line 62 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_afc31993e855f9631572adfedcfe6f34b}\label{setores_2update_8php_afc31993e855f9631572adfedcfe6f34b}} 
\index{setores/update.\+php@{setores/update.\+php}!\$login@{\$login}}
\index{\$login@{\$login}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{\$login}{$login}}
{\footnotesize\ttfamily \$login = \$json\mbox{[}\textquotesingle{}login\textquotesingle{}\mbox{]}}



Decodifica as informações requisitadas. 



Definition at line 24 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_ac8c9d9dd5d90fa5854f0cb8397084ebd}\label{setores_2update_8php_ac8c9d9dd5d90fa5854f0cb8397084ebd}} 
\index{setores/update.\+php@{setores/update.\+php}!\$nome@{\$nome}}
\index{\$nome@{\$nome}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{\$nome}{$nome}}
{\footnotesize\ttfamily \$nome = \hyperlink{_header_8php_a8909d20d656fecf83ebaa2bed0cab2c1}{input\+\_\+check}(\$json\mbox{[}\textquotesingle{}nome\textquotesingle{}\mbox{]})}



id do setor que será modificado 



Definition at line 28 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_a3678c8769c9698fd30581c1016c5f475}\label{setores_2update_8php_a3678c8769c9698fd30581c1016c5f475}} 
\index{setores/update.\+php@{setores/update.\+php}!\$senha@{\$senha}}
\index{\$senha@{\$senha}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{\$senha}{$senha}}
{\footnotesize\ttfamily \$senha = \$json\mbox{[}\textquotesingle{}senha\textquotesingle{}\mbox{]}}



Login do usuário que requisitou a informação. 



Definition at line 25 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_a96db4ecde3fc28a58d5ddae82826b84c}\label{setores_2update_8php_a96db4ecde3fc28a58d5ddae82826b84c}} 
\index{setores/update.\+php@{setores/update.\+php}!else@{else}}
\index{else@{else}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{else}{else}}
{\footnotesize\ttfamily if ( \$admin==1) else}

{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
        \hyperlink{usuarios_2update_8php_a87435a25b7cae617cf284c729b6e835c}{$setor} = \textcolor{keyword}{new} \hyperlink{class_class_setor}{ClassSetor}(\hyperlink{setores_2update_8php_ae97941710d863131c700f069b109991e}{$id})
\end{DoxyCode}


Obter a credencial do usário. 



Definition at line 38 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_a1eb47d68a4a4f73debf91b15e179d813}\label{setores_2update_8php_a1eb47d68a4a4f73debf91b15e179d813}} 
\index{setores/update.\+php@{setores/update.\+php}!finally@{finally}}
\index{finally@{finally}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{finally}{finally}}
{\footnotesize\ttfamily \hyperlink{imprimir_2ficha_2index_8php_a8104793004944f01dd070fc8b1ade3c4}{catch} (Exception \$e) finally}

{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
    echo json\_encode(\hyperlink{setores_2update_8php_a252370d95039a38fa11afab784725d58}{$dados}[0])
\end{DoxyCode}


Criar um log desta operação no sistema. 



Definition at line 69 of file update.\+php.

\mbox{\Hypertarget{setores_2update_8php_abe4cc9788f52e49485473dc699537388}\label{setores_2update_8php_abe4cc9788f52e49485473dc699537388}} 
\index{setores/update.\+php@{setores/update.\+php}!try@{try}}
\index{try@{try}!setores/update.\+php@{setores/update.\+php}}
\subsubsection{\texorpdfstring{try}{try}}
{\footnotesize\ttfamily try}

{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
    $credenciais = \textcolor{keyword}{new} \hyperlink{class_class_credenciais}{ClassCredenciais}(\hyperlink{setores_2update_8php_afc31993e855f9631572adfedcfe6f34b}{$login}, \hyperlink{setores_2update_8php_a3678c8769c9698fd30581c1016c5f475}{$senha})
\end{DoxyCode}


nova opção do setor se do tipo administrador 



Definition at line 32 of file update.\+php.

