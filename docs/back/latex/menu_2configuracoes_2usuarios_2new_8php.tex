\hypertarget{menu_2configuracoes_2usuarios_2new_8php}{}\section{/var/www/chamador.itep.\+govrn/public/api/menu/configuracoes/usuarios/new.php File Reference}
\label{menu_2configuracoes_2usuarios_2new_8php}\index{/var/www/chamador.\+itep.\+govrn/public/api/menu/configuracoes/usuarios/new.\+php@{/var/www/chamador.\+itep.\+govrn/public/api/menu/configuracoes/usuarios/new.\+php}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_a02b1567052c09d3f736df3ae05496307}{make\+Login} (\$name)
\begin{DoxyCompactList}\small\item\em Cabeçalho para conteudo json. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_a252370d95039a38fa11afab784725d58}{\$dados} = \mbox{[}$\,$\mbox{]}
\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_a26b9f9373f7bb79dfcf8a86dff086b45}{\$body} = file\+\_\+get\+\_\+contents(\textquotesingle{}php\+://input\textquotesingle{})
\begin{DoxyCompactList}\small\item\em Contem todos os dados a serem enviados. \end{DoxyCompactList}\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_acedd13b51401130848ce18f4d5c52605}{\$json} = json\+\_\+decode(\$body, true)
\begin{DoxyCompactList}\small\item\em Obtém todas as informações requisitadas P\+O\+ST. \end{DoxyCompactList}\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_afc31993e855f9631572adfedcfe6f34b}{\$login} = \$json\mbox{[}\textquotesingle{}login\textquotesingle{}\mbox{]}
\begin{DoxyCompactList}\small\item\em Decodifica as informações requisitadas. \end{DoxyCompactList}\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_a3678c8769c9698fd30581c1016c5f475}{\$senha} = \$json\mbox{[}\textquotesingle{}senha\textquotesingle{}\mbox{]}
\begin{DoxyCompactList}\small\item\em Login do usuário que requisitou a informação. \end{DoxyCompactList}\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_ac8c9d9dd5d90fa5854f0cb8397084ebd}{\$nome} = \$json\mbox{[}\textquotesingle{}nome\textquotesingle{}\mbox{]}
\begin{DoxyCompactList}\small\item\em Senha criptografada do usuário que requisitou a informação. \end{DoxyCompactList}\item 
int \hyperlink{menu_2configuracoes_2usuarios_2new_8php_a93c5ed26f2451c1cc65c3dfe545a913b}{\$setor\+\_\+id} = intval(\$json\mbox{[}\textquotesingle{}setor\textquotesingle{}\mbox{]})
\begin{DoxyCompactList}\small\item\em Nome do novo usuário do sistema. \end{DoxyCompactList}\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_a607686ef9f99ea7c42f4f3dd3dbb2b0d}{\$password} = \hyperlink{_header_8php_a8db8ce321ecc739cc840efd11c612b10}{generator\+Password}()
\begin{DoxyCompactList}\small\item\em id do setor do novo usuário do sistema \end{DoxyCompactList}\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_a08ad7edf008a5c99d28f03ea033f64f0}{\$password\+\_\+crypt} = \hyperlink{_header_8php_a5455ea8d21f7611dae58e3d4612fb3bd}{encrypt\+\_\+password}(\$password)
\begin{DoxyCompactList}\small\item\em Nova senha do novo usuário do sistema. \end{DoxyCompactList}\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_abe4cc9788f52e49485473dc699537388}{try}
\begin{DoxyCompactList}\small\item\em Criptografando a nova senha. \end{DoxyCompactList}\item 
if(\$credenciais-\/$>$get\+\_\+user() -\/$>$get\+\_\+sector() -\/$>$get\+\_\+admin()==false) \hyperlink{menu_2configuracoes_2usuarios_2new_8php_a8f5108ee2efdbfcd6f3d53b8abcb6c09}{else}
\begin{DoxyCompactList}\small\item\em Obter a credencial do usário. \end{DoxyCompactList}\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_a87435a25b7cae617cf284c729b6e835c}{\$setor} = new \hyperlink{class_class_setor}{Class\+Setor}(\$setor\+\_\+id)
\begin{DoxyCompactList}\small\item\em Criar um login para o novo usuário. \end{DoxyCompactList}\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_a559c8003f481610caf373b85cc607fb6}{\$usuario} = new \hyperlink{class_class_usuario}{Class\+Usuario}(null, strtoupper(\$nome), \$setor, \$login\+\_\+user, \$password\+\_\+crypt)
\begin{DoxyCompactList}\small\item\em Obter o setor do id. \end{DoxyCompactList}\item 
\hyperlink{menu_2configuracoes_2usuarios_2new_8php_a9a2cf15a653aee8be437f7ae474cd494}{\$log} = new \hyperlink{class_class_logs}{Class\+Logs}(null, \$credenciais-\/$>$get\+\_\+user(), \char`\"{}C\+R\+I\+OU U\+S\+UÁ\+R\+IO\char`\"{}, \$usuario)
\item 
\hyperlink{imprimir_2ficha_2index_8php_a8104793004944f01dd070fc8b1ade3c4}{catch}(Exception \$e) \hyperlink{menu_2configuracoes_2usuarios_2new_8php_a1eb47d68a4a4f73debf91b15e179d813}{finally}
\begin{DoxyCompactList}\small\item\em Criar um log desta operação no sistema. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a02b1567052c09d3f736df3ae05496307}\label{menu_2configuracoes_2usuarios_2new_8php_a02b1567052c09d3f736df3ae05496307}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!make\+Login@{make\+Login}}
\index{make\+Login@{make\+Login}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{make\+Login()}{makeLogin()}}
{\footnotesize\ttfamily make\+Login (\begin{DoxyParamCaption}\item[{}]{\$name }\end{DoxyParamCaption})}



Cabeçalho para conteudo json. 

Cabeçalho com as classes e funções gerias Gera um login válido a partir do nome do Usuário


\begin{DoxyParams}{Parameters}
{\em name} & Nome do usuário do sistema \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
String login válido para o usuário 
\end{DoxyReturn}
Explode o nome do usuário

Adiciona o primeiro nome a um novo login

Adiciona um ponto ao novo login

Adiciona o último nome do usuário ano novo login

Verifica se algum usuário já possui este login 

Definition at line 25 of file new.\+php.



\subsection{Variable Documentation}
\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a26b9f9373f7bb79dfcf8a86dff086b45}\label{menu_2configuracoes_2usuarios_2new_8php_a26b9f9373f7bb79dfcf8a86dff086b45}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$body@{\$body}}
\index{\$body@{\$body}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$body}{$body}}
{\footnotesize\ttfamily \$body = file\+\_\+get\+\_\+contents(\textquotesingle{}php\+://input\textquotesingle{})}



Contem todos os dados a serem enviados. 



Definition at line 59 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a252370d95039a38fa11afab784725d58}\label{menu_2configuracoes_2usuarios_2new_8php_a252370d95039a38fa11afab784725d58}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$dados@{\$dados}}
\index{\$dados@{\$dados}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$dados}{$dados}}
{\footnotesize\ttfamily \$dados = \mbox{[}$\,$\mbox{]}}



Definition at line 57 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_acedd13b51401130848ce18f4d5c52605}\label{menu_2configuracoes_2usuarios_2new_8php_acedd13b51401130848ce18f4d5c52605}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$json@{\$json}}
\index{\$json@{\$json}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$json}{$json}}
{\footnotesize\ttfamily \$json = json\+\_\+decode(\$body, true)}



Obtém todas as informações requisitadas P\+O\+ST. 



Definition at line 60 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a9a2cf15a653aee8be437f7ae474cd494}\label{menu_2configuracoes_2usuarios_2new_8php_a9a2cf15a653aee8be437f7ae474cd494}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$log@{\$log}}
\index{\$log@{\$log}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$log}{$log}}
{\footnotesize\ttfamily \$log = new \hyperlink{class_class_logs}{Class\+Logs}(null, \$credenciais-\/$>$get\+\_\+user(), \char`\"{}C\+R\+I\+OU U\+S\+UÁ\+R\+IO\char`\"{}, \$usuario)}



Definition at line 91 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_afc31993e855f9631572adfedcfe6f34b}\label{menu_2configuracoes_2usuarios_2new_8php_afc31993e855f9631572adfedcfe6f34b}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$login@{\$login}}
\index{\$login@{\$login}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$login}{$login}}
{\footnotesize\ttfamily \$login = \$json\mbox{[}\textquotesingle{}login\textquotesingle{}\mbox{]}}



Decodifica as informações requisitadas. 



Definition at line 62 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_ac8c9d9dd5d90fa5854f0cb8397084ebd}\label{menu_2configuracoes_2usuarios_2new_8php_ac8c9d9dd5d90fa5854f0cb8397084ebd}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$nome@{\$nome}}
\index{\$nome@{\$nome}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$nome}{$nome}}
{\footnotesize\ttfamily \$nome = \$json\mbox{[}\textquotesingle{}nome\textquotesingle{}\mbox{]}}



Senha criptografada do usuário que requisitou a informação. 



Definition at line 65 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a607686ef9f99ea7c42f4f3dd3dbb2b0d}\label{menu_2configuracoes_2usuarios_2new_8php_a607686ef9f99ea7c42f4f3dd3dbb2b0d}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$password@{\$password}}
\index{\$password@{\$password}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$password}{$password}}
{\footnotesize\ttfamily \$password = \hyperlink{_header_8php_a8db8ce321ecc739cc840efd11c612b10}{generator\+Password}()}



id do setor do novo usuário do sistema 



Definition at line 68 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a08ad7edf008a5c99d28f03ea033f64f0}\label{menu_2configuracoes_2usuarios_2new_8php_a08ad7edf008a5c99d28f03ea033f64f0}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$password\+\_\+crypt@{\$password\+\_\+crypt}}
\index{\$password\+\_\+crypt@{\$password\+\_\+crypt}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$password\+\_\+crypt}{$password\_crypt}}
{\footnotesize\ttfamily \$password\+\_\+crypt = \hyperlink{_header_8php_a5455ea8d21f7611dae58e3d4612fb3bd}{encrypt\+\_\+password}(\$password)}



Nova senha do novo usuário do sistema. 



Definition at line 69 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a3678c8769c9698fd30581c1016c5f475}\label{menu_2configuracoes_2usuarios_2new_8php_a3678c8769c9698fd30581c1016c5f475}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$senha@{\$senha}}
\index{\$senha@{\$senha}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$senha}{$senha}}
{\footnotesize\ttfamily \$senha = \$json\mbox{[}\textquotesingle{}senha\textquotesingle{}\mbox{]}}



Login do usuário que requisitou a informação. 



Definition at line 63 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a87435a25b7cae617cf284c729b6e835c}\label{menu_2configuracoes_2usuarios_2new_8php_a87435a25b7cae617cf284c729b6e835c}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$setor@{\$setor}}
\index{\$setor@{\$setor}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$setor}{$setor}}
{\footnotesize\ttfamily \$setor = new \hyperlink{class_class_setor}{Class\+Setor}(\$setor\+\_\+id)}



Criar um login para o novo usuário. 



Definition at line 80 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a93c5ed26f2451c1cc65c3dfe545a913b}\label{menu_2configuracoes_2usuarios_2new_8php_a93c5ed26f2451c1cc65c3dfe545a913b}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$setor\+\_\+id@{\$setor\+\_\+id}}
\index{\$setor\+\_\+id@{\$setor\+\_\+id}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$setor\+\_\+id}{$setor\_id}}
{\footnotesize\ttfamily int \$setor\+\_\+id = intval(\$json\mbox{[}\textquotesingle{}setor\textquotesingle{}\mbox{]})}



Nome do novo usuário do sistema. 



Definition at line 66 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a559c8003f481610caf373b85cc607fb6}\label{menu_2configuracoes_2usuarios_2new_8php_a559c8003f481610caf373b85cc607fb6}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!\$usuario@{\$usuario}}
\index{\$usuario@{\$usuario}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{\$usuario}{$usuario}}
{\footnotesize\ttfamily \$usuario = new \hyperlink{class_class_usuario}{Class\+Usuario}(null, strtoupper(\$nome), \$setor, \$login\+\_\+user, \$password\+\_\+crypt)}



Obter o setor do id. 



Definition at line 82 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a8f5108ee2efdbfcd6f3d53b8abcb6c09}\label{menu_2configuracoes_2usuarios_2new_8php_a8f5108ee2efdbfcd6f3d53b8abcb6c09}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!else@{else}}
\index{else@{else}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{else}{else}}
{\footnotesize\ttfamily if ( \$credenciais-\/$>$get\+\_\+user() -\/$>$get\+\_\+sector() -\/$>$get\+\_\+admin()==false) else}

{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
        $login\_user = \hyperlink{menu_2configuracoes_2usuarios_2new_8php_a02b1567052c09d3f736df3ae05496307}{makeLogin}(strtolower(\hyperlink{main_page_2painel_geral_2new_8php_ac8c9d9dd5d90fa5854f0cb8397084ebd}{$nome}))
\end{DoxyCode}


Obter a credencial do usário. 



Definition at line 77 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_a1eb47d68a4a4f73debf91b15e179d813}\label{menu_2configuracoes_2usuarios_2new_8php_a1eb47d68a4a4f73debf91b15e179d813}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!finally@{finally}}
\index{finally@{finally}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{finally}{finally}}
{\footnotesize\ttfamily \hyperlink{imprimir_2ficha_2index_8php_a8104793004944f01dd070fc8b1ade3c4}{catch} (Exception \$e) finally}

{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
    echo json\_encode(\hyperlink{main_page_2painel_geral_2new_8php_a252370d95039a38fa11afab784725d58}{$dados}[0])
\end{DoxyCode}


Criar um log desta operação no sistema. 



Definition at line 98 of file new.\+php.

\mbox{\Hypertarget{menu_2configuracoes_2usuarios_2new_8php_abe4cc9788f52e49485473dc699537388}\label{menu_2configuracoes_2usuarios_2new_8php_abe4cc9788f52e49485473dc699537388}} 
\index{menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}!try@{try}}
\index{try@{try}!menu/configuracoes/usuarios/new.\+php@{menu/configuracoes/usuarios/new.\+php}}
\subsubsection{\texorpdfstring{try}{try}}
{\footnotesize\ttfamily try}

{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
    $credenciais = \textcolor{keyword}{new} \hyperlink{class_class_credenciais}{ClassCredenciais}(\hyperlink{main_page_2painel_geral_2new_8php_afc31993e855f9631572adfedcfe6f34b}{$login}, \hyperlink{main_page_2painel_geral_2new_8php_a3678c8769c9698fd30581c1016c5f475}{$senha})
\end{DoxyCode}


Criptografando a nova senha. 



Definition at line 71 of file new.\+php.

