.TH "/var/www/chamador.itep.govrn/public/api/mainPage/inicial/naoAtendidosProximo.php" 3 "Mon Apr 6 2020" "Chamador ITEP - API" \" -*- nroff -*-
.ad l
.nh
.SH NAME
/var/www/chamador.itep.govrn/public/api/mainPage/inicial/naoAtendidosProximo.php
.SH SYNOPSIS
.br
.PP
.SS "Functions"

.in +1c
.ti -1c
.RI "\fBset_emAtendimento\fP ($id, $user)"
.br
.RI "Senha criptografada do usuário que requisitou a informação\&. "
.in -1c
.SS "Variables"

.in +1c
.ti -1c
.RI "\fB$dados\fP = []"
.br
.RI "Cabeçalho para conteudo json\&. "
.ti -1c
.RI "\fB$body\fP = file_get_contents('php://input')"
.br
.RI "Contem todos os dados a serem enviados\&. "
.ti -1c
.RI "\fB$json\fP = json_decode($body, true)"
.br
.RI "Obtém todas as informações requisitadas POST\&. "
.ti -1c
.RI "\fB$login\fP = $json['login']"
.br
.RI "Decodifica as informações requisitadas\&. "
.ti -1c
.RI "\fB$senha\fP = $json['senha']"
.br
.RI "Login do usuário que requisitou a informação\&. "
.ti -1c
.RI "\fBtry\fP"
.br
.ti -1c
.RI "\fB$db\fP = new \fBClassConnection\fP()"
.br
.RI "Obter a credencial do usário\&. "
.ti -1c
.RI "\fB$today\fP = date('Y\-m\-d')"
.br
.ti -1c
.RI "\fB$sql\fP = 'SELECT `ficha_id` FROM `fichas_tb` WHERE `ficha_criacao_data`>='' \&. $today \&. '' AND `ficha_setor_id`=' \&. $credenciais\->get_user()\->get_sector()\->get_id() \&. ' AND (`ficha_status`='NÃO ATENDIDO' OR `ficha_status`='ENCAMINHADO')'"
.br
.RI "Data do dia atual\&. "
.ti -1c
.RI "\fB$result\fP = $db\->request_query($sql)"
.br
.ti -1c
.RI "if(mysqli_num_rows($result) > 0) \fBelse\fP"
.br
.ti -1c
.RI "\fBcatch\fP(Exception $e) \fBfinally\fP"
.br
.in -1c
.SH "Function Documentation"
.PP 
.SS "set_emAtendimento ( $id,  $user)"

.PP
Senha criptografada do usuário que requisitou a informação\&. Define a ficha para CHAMAR (EM ATENDIMENTO)
.PP
\fBParameters:\fP
.RS 4
\fIid\fP id da Ficha 
.br
\fIuser\fP usuário que está atendendo a ficha 
.RE
.PP
\fBReturns:\fP
.RS 4
Array Mensagem 
.RE
.PP
Criar um log desta operação no sistema 
.PP
Definition at line 34 of file naoAtendidosProximo\&.php\&.
.SH "Variable Documentation"
.PP 
.SS "$body = file_get_contents('php://input')"

.PP
Contem todos os dados a serem enviados\&. 
.PP
Definition at line 21 of file naoAtendidosProximo\&.php\&.
.SS "$dados = []"

.PP
Cabeçalho para conteudo json\&. Cabeçalho com as classes e funções gerias 
.PP
Definition at line 19 of file naoAtendidosProximo\&.php\&.
.SS "$db = new \fBClassConnection\fP()"

.PP
Obter a credencial do usário\&. 
.PP
Definition at line 49 of file naoAtendidosProximo\&.php\&.
.SS "$json = json_decode($body, true)"

.PP
Obtém todas as informações requisitadas POST\&. 
.PP
Definition at line 22 of file naoAtendidosProximo\&.php\&.
.SS "$login = $json['login']"

.PP
Decodifica as informações requisitadas\&. 
.PP
Definition at line 24 of file naoAtendidosProximo\&.php\&.
.SS "$result = $db\->request_query($sql)"

.PP
Definition at line 55 of file naoAtendidosProximo\&.php\&.
.SS "$senha = $json['senha']"

.PP
Login do usuário que requisitou a informação\&. 
.PP
Definition at line 25 of file naoAtendidosProximo\&.php\&.
.SS "$sql = 'SELECT `ficha_id` FROM `fichas_tb` WHERE `ficha_criacao_data`>='' \&. $today \&. '' AND `ficha_setor_id`=' \&. $credenciais\->get_user()\->get_sector()\->get_id() \&. ' AND (`ficha_status`='NÃO ATENDIDO' OR `ficha_status`='ENCAMINHADO')'"

.PP
Data do dia atual\&. 
.PP
Definition at line 54 of file naoAtendidosProximo\&.php\&.
.SS "$today = date('Y\-m\-d')"

.PP
Definition at line 51 of file naoAtendidosProximo\&.php\&.
.SS "if (mysqli_num_rows( $result) > 0) else"
\fBInitial value:\fP
.PP
.nf
{
        
        array_push(
            $dados,
            [
                'tipo' => 'warning',
                'mensagem' => "Não existem fichas a ser chamada\&."
            ]
        )
.fi
.PP
Definition at line 197 of file naoAtendidosProximo\&.php\&.
.SS "\fBcatch\fP (Exception $e) finally"
\fBInitial value:\fP
.PP
.nf
{
    echo json_encode($dados)
.fi
.PP
Definition at line 212 of file naoAtendidosProximo\&.php\&.
.SS "try"
\fBInitial value:\fP
.PP
.nf
{
    $credenciais = new ClassCredenciais($login, $senha)
.fi
.PP
Definition at line 47 of file naoAtendidosProximo\&.php\&.
.SH "Author"
.PP 
Generated automatically by Doxygen for Chamador ITEP - API from the source code\&.
